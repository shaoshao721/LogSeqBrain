tags:: 小林网络

- http基本概念
	- 超文本传输协议
	- **HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据的「约定和规范」。**
	- 常见状态码
		- ![image.png](../assets/image_1708832645616_0.png)
		- 2xx成功了
			- 200 ok 响应头会有body数据
			- 204 成功了，但是响应头没有body数据
			- 206 分块下载或断电续传，body里不是所有的数据
		- 3xx 重定向，资源变动了，要用新的url重新发送来获取咨询
			- 301 永久重定向，以后都用新的吧
			- 302 暂时的，先用另外一个吧
			- 都会在头里加上Location，表示后续你跳转的地址，浏览器会自动重定向过去
			- 304 资源没改，客户端可以继续用缓存的资源
		- 4xx 客户端有问题，报文错误，服务器没法处理
			- 400 报文错误
			- 403 服务端禁止访问资源
			- 404 资源不存在或没找到
		- 5xx 服务端错误
			- 500 笼统的不知道咋错了
			- 502 网关错了，访问后端服务器出错了
			- 503 很忙，稍后重试吧
	- 常见字段
		- host域名
		- content-length 返回数据 表示 本次返回的数据长度后面的就是下一个回应了
		- connection 客户端要求服务器使用http长链接
		- content-type 服务端告诉客户端 数据是什么格式 客户端用accept声明自己接收哪些格式
		- content-encoding 服务端返回数据用的什么压缩格式，客户端用accept-encoding标明自己支持哪种压缩格式
- GET和POST区别
	- get
		- 从服务器获取资源，具有幂等性，不会修改服务器资源
		- 参数是写在url里的
		- 浏览器会对url有长度限制
		- 安全且幂等
	- post
		- 请求对指定资源做处理
		- 放在body里
		- 不安全也不幂等
- HTTP缓存技术
	- 如果有很多重复的http请求，缓存在本地
	- 强制缓存
		- 浏览器判断缓存没过期，就直接用本地缓存，根本不发请求出去了
		- 这种会在返回值里标注 200(from disk cache)
		- 资源在客户端缓存有效期
			- cache-control 相对时间
			- expires 绝对时间
			- 如果都设置了，用cache-control
		- 浏览器第一次访问服务器资源，服务器返回的时候会在返回头加上cache-control
		- 再次访问的时候，会对比时间，如果没超过就用缓存的，否则去请求服务器
	- 协商缓存
		- ![image.png](../assets/image_1708833673140_0.png)
		- 和服务器协商之后用本地缓存
		- 实现
			- 请求头部的if-modified-since和返回的last-modified
			- 流程
				- 客户端请求资源。
				- 服务器返回资源，并在响应头中包含`Last-Modified`头部。
				- 客户端存储资源和头部信息，并缓存资源。
				- 当客户端再次请求相同的资源时，它会在请求头中包含`If-Modified-Since`头部，其值为之前服务器发送的`Last-Modified`日期。
				- 如果服务器检查资源自从`If-Modified-Since`头部中的日期后未修改过，它会返回一个304 Not Modified状态码，而不是资源内容。
				- 客户端接收到304响应后，知道它可以安全地使用本地缓存的版本。
			- ### ETag / If-None-Match
				- **ETag**: 服务器在响应中发送这个头部，表示资源的一个唯一标识（通常是一个哈希值）。
				- **If-None-Match**: 客户端在后续请求中使用这个头部，发送之前服务器提供的ETag值。如果ETag没有变化，则表明内容没有更新。
				- 流程
					- 客户端请求资源。
					- 服务器返回资源，并在响应头中包含`ETag`头部。
					- 客户端存储资源和头部信息，并缓存资源。
					- 当客户端再次请求相同的资源时，它会在请求头中包含`If-None-Match`头部，其值为之前服务器发送的ETag值。
					- 如果服务器检查到ETag值匹配（即资源未变化），它会返回一个304 Not Modified状态码，而不是资源内容。
					- 客户端接收到304响应后，知道它可以安全地使用本地缓存的版本。
			- 最好用etag这种，因为更精确，用时间的控制的话，可能修改了并没有改时间，没有改，时间也变了，而且只能精确到秒级别
		- 在没命中强制缓存的时候，发起协商缓存字段请求
		- ![image.png](../assets/image_1708834073038_0.png)
- http特性
	-