tags:: 拓扑排序，图

- 有向图的环检测
- 题目：
	- ![image.png](../assets/image_1669535655307_0.png)
	- 什么时候会无法修完所有的课程，就是在存在循环依赖的时候
	- 首先，将题目中给的条件构造成一幅图
	- ```
	  class Solution {
	      // 1. 先构造图
	      boolean[] visited;
	      boolean[] onPath;
	      boolean hasCycle = false;
	      public boolean canFinish(int numCourses, int[][] prerequisites) {
	          LinkedList<Integer>[] graph = buildGraph(numCourses, prerequisites);
	          visited = new boolean[numCourses];
	          onPath = new boolean[numCourses];
	          for(int i = 0; i < numCourses; i++) {
	              traverse(graph, i);
	          }
	          return !hasCycle;
	      }
	  
	      void traverse(LinkedList<Integer>[] graph, int node){
	          if(onPath[node]) {
	              hasCycle = true;
	              return;
	          }
	          if(visited[node] || hasCycle) {
	              return;
	          }
	          visited[node] = true;
	          onPath[node] = true;
	          for(int t : graph[node]) {
	              traverse(graph, t);
	          }
	          onPath[node] = false;
	      }
	  
	      LinkedList<Integer>[] buildGraph(int numCourses, int[][] prerequisites) {
	          LinkedList<Integer>[] graph = new LinkedList[numCourses];
	          for(int i = 0; i < numCourses; i++) {
	              graph[i] = new LinkedList<>();
	          }
	          for(int[] edge : prerequisites) {
	              int from = edge[1];
	              int to = edge[0];
	              graph[from].addLast(to);
	          }
	          return graph;
	      }
	  }
	  ```
-