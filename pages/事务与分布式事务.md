tags:: 事务，分布式事务

- 事务及ACID特性
	- 事务：用户定义的一些数据库操作，要么全部执行要么都不执行
	- 事务为引用层服务，方便业务系统的开发，简化业务系统的开发，简化业务系统的编程模型出现的
- 特性：
	- 原子性：要么全部提交成功，要么全部失败回滚，不能执行其中一部分。
	- 一致性：数据库的一致性及业务上的一致性。只能从一种有效状态变成另外一种有效状态。
	- 隔离性：一个事务所做的修改，在最终提交之前，对其他的事务都不可见。只有可串行化符合
		- 四种隔离级别
			- 读未提交 脏读
			- 读已提交 不可重复读
			- 可重复读 幻读
			- 串行化
		- 持久性：事务被提交了之后，他的改变是永久的。
- XA两阶段提交
	- 作为资源管理器及事务协调器的标准接口
		- XA
			- open,close 资源管理器的开启和关闭
			- start，end 开始结束一个本地事务
			- prepare，commit，rollback 事务协调器的预提交，提交和回滚
			- recover 回滚一个已经预提交的事务
		- AX
			- reg，unreg 资源管理器的注册。动态注册了之后，可以对事务iD进行操作
	- 用来管理分布式事务，保证数据的强一致性，解决很多临时性系统故障（进程，网络节点，通信）