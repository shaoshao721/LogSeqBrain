tags:: 消息队列，mq，事务消息，分布式事务

- 消息队列里的事务：解决消息生产者和消息消费者的数据一致性问题
- 例子：
	- 下单后，创建订单
	- 使用消息队列发消息给购物车系统删除已下单商品
	- 可能出现的问题：
		- 创建了订单，没有清理购物车。 这个可以让购物车清理成功之后再给服务端抱回消费确认就行，要是失败了可以通过消息队列来自动重试
		- 订单创建失败了，购物车里商品清掉了。要解决的问题。要保证创建订单和发送消息这两个步骤的一致性
- 分布式事务
	- 分布式事务实现 二阶段提交，TCC和事务消息
	- 事务消息适用场景：异步更新数据，对数据实时性要求不太高的场景。创建订单后，出现短暂几秒购物车商品没有被清空也行。
-
-
-
- TODO 2PC和TCC补充下