tags:: mysql，并发控制

- 并发控制
	- 多个查询要同时修改数据，就会有并发控制问题
- 两个级别
	- 服务器级别
	- 存储引擎级别
- 读写锁
	- 读锁是共享的，可以同时有多个客户端来读取
	- 写锁是排他的，写锁会阻塞读锁和其他的写锁
- 锁的粒度
	- 让锁的粒度变小可以提高共享资源并发性。但是锁的粒度变小就会导致锁变多，加锁也需要消耗资源。获取锁，检查锁是否空闲，释放锁，也会增加系统开销，系统需要耗费大量时间管理锁
	- mysql锁粒度
		- 表锁
			- 最基本也是开销最小的锁策略。锁定整张表
			- 有一些变体。READ LOCAL 表锁支持某些类型的并发写操作。写锁队列和读锁队列是分开的，写锁队列的优先级绝对高于读队列
		- 行级锁
			- 锁行
			- 需要跟踪谁拥有这些行级锁，已经锁定了多场时间，行级锁的类型，以及何时该清理不再需要的行级锁
		- 元数据锁
			- 修改表名或schema。
		- 8.0 应用程序级别的锁功能